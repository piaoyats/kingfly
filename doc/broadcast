spark 1.1.0
1 默认的广播变量是TorrentBroadcast
2 广播变量默认采用snappy压缩
3 TorrentBroadcast内部封装一个数据对象， 该对象按找4M切分为一个个小block，每一个block其实是一个byte数组，被wrap为ByteBuffer
4 通过SparkEnv.get.blockManager.putBytes 将每个block广播出去
5 按道理spark会将BroadCast对象序列化后发到所有节点（value不会序列化，是transient的），但没看到这部分代码？

######to put broadcastid:broadcast_5 in bm with
org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector<
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaIntObjectInspector@6af7033c,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@3a2b3641>


######to put broadcastid:broadcast_0 in bm with
org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector<
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@3a2b3641,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaIntObjectInspector@6af7033c,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaLongObjectInspector@7ef58f00,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaFloatObjectInspector@2b7f8a1e,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaDoubleObjectInspector@4244cde1,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaShortObjectInspector@332890c4,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaByteObjectInspector@2c384e19,
org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaBooleanObjectInspector@248f61fd>


0 多数据类型测试日志  成功！
#### islocal true
#################### value = org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector
######to put broadcastid:broadcast_0 in bm with org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector<org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@21c3faa,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaIntObjectInspector@c97b2fb,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaLongObjectInspector@3b678332,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaFloatObjectInspector@8d66616,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaDoubleObjectInspector@33c832e2,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaShortObjectInspector@1c84adfd,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaByteObjectInspector@4abacbab,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaBooleanObjectInspector@2d916de1>
########## TB islocal true
#### islocal true
#################### value = [B
######to put broadcastid:broadcast_1 in bm with [B@1eaf7b69
########## TB islocal true
########to read broadcastid:broadcast_1 from bm
####get it!
########to read broadcastid:broadcast_1 from bm
####get it!
########to read broadcastid:broadcast_0 from bm
####get it!
########to read broadcastid:broadcast_0 from bm
####get it!
23:17:11.457 WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
#### islocal true
#################### value = [B
######to put broadcastid:broadcast_2 in bm with [B@60809a78
########## TB islocal true
########to read broadcastid:broadcast_2 from bm
####get it!
########to read broadcastid:broadcast_2 from bm
####get it!
#### islocal true
#################### value = org.apache.spark.SerializableWritable
######to put broadcastid:broadcast_3 in bm with Configuration: core-default.xml, core-site.xml, mapred-default.xml, mapred-site.xml
########## TB islocal true
#### islocal true
#################### value = [B
######to put broadcastid:broadcast_4 in bm with [B@48fdf633
########## TB islocal true
########to read broadcastid:broadcast_4 from bm
####get it!
########to read broadcastid:broadcast_4 from bm
####get it!
########to read broadcastid:broadcast_3 from bm
####get it!
########to read broadcastid:broadcast_3 from bm
####get it!


1 压缩测试的日志 失败！
#### islocal true
#################### value = org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector
######to put broadcastid:broadcast_0 in bm with org.apache.hadoop.hive.serde2.objectinspector.ReflectionStructObjectInspector<org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaIntObjectInspector@29991328,org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@b8bc6e>
########## TB islocal true
#### islocal true
#################### value = [B
######to put broadcastid:broadcast_1 in bm with [B@128df71f
########## TB islocal true
########to read broadcastid:broadcast_1 from bm
####not get it!
########to read broadcastid:broadcast_1 from bm
####not get it!

两种可能性
a put没有成功
b 多线程导致？

定位问题，多sc导致的，将broadcast放到bc1中却到bc2中去拿